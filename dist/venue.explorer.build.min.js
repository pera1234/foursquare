var venueExplorerModule=angular.module("venueExplorer",["ngMessages","ui.bootstrap"]);venueExplorerModule.controller("venueExplorerController",["$scope","$location","venueExplorerService",function(a,b,c){console.log("Calling venueExplorerController"),a.venueSearchResults=[],a.serviceCallError="",a.searchLocation="",a.viewby=10,a.totalItems=a.venueSearchResults.length,a.currentPage=1,a.itemsPerPage=a.viewby,a.maxSize=5,a.numPages=Math.ceil(a.totalItems/a.itemsPerPage),a.setPage=function(b){a.currentPage=b},a.setItemsPerPage=function(b){a.itemsPerPage=b,a.currentPage=1,a.numPages=Math.ceil(a.totalItems/a.itemsPerPage)},a.submitForm=function(){console.log("Submitting form with search text:"+a.searchLocation),a.venueSearchResults.length=0;var b=c.getVenues(a.searchLocation);b.then(function(b){a.answer=b,a.status=b.meta.code,a.venueSearchResults=b.response.groups[0].items,console.log("Status:"+a.status),a.totalItems=a.venueSearchResults.length},function(b){a.serviceCallError=b,console.log("Error:"+a.serviceCallError.data.meta.code)})},a.checkResultsSize=function(){return a.venueSearchResults.length<=0}}]),venueExplorerModule.service("venueExplorerService",["$http","$q","$filter",function(a,b,c){var d="https://api.foursquare.com/v2/venues/explore?near=",e="&client_id=YB1I2HHFHTPPLZNSHU0CQB1MMQCMB3A2NPLVQUOOXJHD5O4L",f="&client_secret=FJ43M15M04W5WFWHRMJXTCBQUXCSVB0DWMLDQBAPPDLVXHSP",g=(new Date,c("date")(new Date,"yyyyMMdd")),h="&v="+g,i={getVenues:function(c){console.log("Request:"+d+c+e+f+h);var g=a.get(d+c+e+f+h),i=i||b.defer();return g.then(function(a){i.resolve(a.data),console.log("Success")},function(a){i.reject(a),console.log("Error")}),i.promise}};return i}]);